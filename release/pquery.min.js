/**
 * almond 0.1.1 Copyright (c) 2011, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/*!
 * Contains the slick.parser library
 * https://github.com/subtleGradient/slick
 */

// Credit: XRegExp 0.6.1 (c) 2007-2008 Steven Levithan <http://stevenlevithan.com/regex/xregexp/> MIT License

/*
 * pQuery physics library v0.1a
 * https://github.com/wellcaffeinated/pQuery
 * 
 * Copyright 2012, Jasper Palfree
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */

/*
		 * Contains modified parts of jQuery JavaScript Library v1.7.2
		 * http://jquery.com/
		 *
		 * Copyright 2011, John Resig
		 * Dual licensed under the MIT or GPL Version 2 licenses.
		 * http://jquery.org/license
		 *
		 */

/*
 * pQuery physics library v0.1a
 * https://github.com/wellcaffeinated/pQuery
 * 
 * Copyright 2012, Jasper Palfree
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */

/*
		 * Contains callbacks.js of jQuery JavaScript Library v1.8pre
		 * http://jquery.com/
		 *
		 * Copyright 2011, John Resig
		 * Dual licensed under the MIT or GPL Version 2 licenses.
		 * http://jquery.org/license
		 *
		 * Date: Mon Jun 04 2012
		 */

/*
 * pQuery physics library v0.1a
 * https://github.com/wellcaffeinated/pQuery
 * 
 * Copyright 2012, Jasper Palfree
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */

/*
 * pQuery physics library v0.1a
 * https://github.com/wellcaffeinated/pQuery
 * 
 * Copyright 2012, Jasper Palfree
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */

/*
 * pQuery physics library v0.1a
 * https://github.com/wellcaffeinated/pQuery
 * 
 * Copyright 2012, Jasper Palfree
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */

/*
 * pQuery physics library v0.1a
 * https://github.com/wellcaffeinated/pQuery
 * 
 * Copyright 2012, Jasper Palfree
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */

/*
 * pQuery physics library v0.1a
 * https://github.com/wellcaffeinated/pQuery
 * 
 * Copyright 2012, Jasper Palfree
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */

/*
 * pQuery physics library v0.1a
 * https://github.com/wellcaffeinated/pQuery
 * 
 * Copyright 2012, Jasper Palfree
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */

/*
 * pQuery physics library v0.1a
 * https://github.com/wellcaffeinated/pQuery
 * 
 * Copyright 2012, Jasper Palfree
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */

/*
 * pQuery physics library v0.1a
 * https://github.com/wellcaffeinated/pQuery
 * 
 * Copyright 2012, Jasper Palfree
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */

/*
 * pQuery physics library v0.1a
 * https://github.com/wellcaffeinated/pQuery
 * 
 * Copyright 2012, Jasper Palfree
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */

/*
 * pQuery physics library v0.1a
 * https://github.com/wellcaffeinated/pQuery
 * 
 * Copyright 2012, Jasper Palfree
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */

/*
 * pQuery physics library v0.1a
 * https://github.com/wellcaffeinated/pQuery
 * 
 * Copyright 2012, Jasper Palfree
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */

/*!
 * pQuery physics library v0.1a
 * https://github.com/wellcaffeinated/pQuery
 * 
 * Copyright 2012, Jasper Palfree
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * 
 * Date: Mon Jun 04 2012
 * @license
 */

/*!
		 * Contains modified parts of jQuery JavaScript Library v1.7.2
		 * http://jquery.com/
		 *
		 * Copyright 2011, John Resig
		 * Dual licensed under the MIT or GPL Version 2 licenses.
		 * http://jquery.org/license
		 *
		 */

(function(a,b,c){var d,e,f;(function(a){function l(a,b){var c=b&&b.split("/"),d=g.map,e=d&&d["*"]||{},f,h,i,j,k,l,m;if(a&&a.charAt(0)==="."&&b){c=c.slice(0,c.length-1),a=c.concat(a.split("/"));for(k=0;m=a[k];k++)if(m===".")a.splice(k,1),k-=1;else if(m===".."){if(k===1&&(a[2]===".."||a[0]===".."))return!0;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}if((c||e)&&d){f=a.split("/");for(k=f.length;k>0;k-=1){h=f.slice(0,k).join("/");if(c)for(l=c.length;l>0;l-=1){i=d[c.slice(0,l).join("/")];if(i){i=i[h];if(i){j=i;break}}}j=j||e[h];if(j){f.splice(0,k,j),a=f.join("/");break}}}return a}function m(b,c){return function(){return k.apply(a,i.call(arguments,0).concat([b,c]))}}function n(a){return function(b){return l(b,a)}}function o(a){return function(c){b[a]=c}}function p(d){if(c.hasOwnProperty(d)){var e=c[d];delete c[d],h[d]=!0,j.apply(a,e)}if(!b.hasOwnProperty(d))throw new Error("No "+d);return b[d]}function q(a,b){var c,d,e=a.indexOf("!");return e!==-1?(c=l(a.slice(0,e),b),a=a.slice(e+1),d=p(c),d&&d.normalize?a=d.normalize(a,n(b)):a=l(a,b)):a=l(a,b),{f:c?c+"!"+a:a,n:a,p:d}}function r(a){return function(){return g&&g.config&&g.config[a]||{}}}var b={},c={},g={},h={},i=[].slice,j,k;j=function(d,e,f,g){var i=[],j,k,l,n,s,t;g=g||d;if(typeof f=="function"){e=!e.length&&f.length?["require","exports","module"]:e;for(t=0;t<e.length;t++){s=q(e[t],g),l=s.f;if(l==="require")i[t]=m(d);else if(l==="exports")i[t]=b[d]={},j=!0;else if(l==="module")k=i[t]={id:d,uri:"",exports:b[d],config:r(d)};else if(b.hasOwnProperty(l)||c.hasOwnProperty(l))i[t]=p(l);else if(s.p)s.p.load(s.n,m(g,!0),o(l),{}),i[t]=b[l];else if(!h[l])throw new Error(d+" missing "+l)}n=f.apply(b[d],i);if(d)if(k&&k.exports!==a&&k.exports!==b[d])b[d]=k.exports;else if(n!==a||!j)b[d]=n}else d&&(b[d]=f)},d=e=k=function(b,c,d,e){return typeof b=="string"?p(q(b,c).f):(b.splice||(g=b,c.splice?(b=c,c=d,d=null):b=a),c=c||function(){},e?j(a,b,c,d):setTimeout(function(){j(a,b,c,d)},15),k)},k.config=function(a){return g=a,k},f=function(a,b,d){b.splice||(d=b,b=[]),c[a]=[a,b,d]},f.amd={jQuery:!0}})(),f("almond",function(){}),f("util/slick.parser",[],function(){function m(e,f,h,j,l,m,n,o,p,q,r,s,t,u){if(f||b===-1){a.expressions[++b]=[],c=-1;if(f)return""}if(h||j||c===-1){h=h||" ";var v=a.expressions[b];d&&v[c]&&(v[c].reverseCombinator=i(h)),v[++c]={combinator:h,tag:"*"}}var w=a.expressions[b][c];if(l)w.tag=l.replace(g,"");else if(m)w.id=m.replace(g,"");else if(n)n=n.replace(g,""),w.classList||(w.classList=[]),w.classes||(w.classes=[]),w.classList.push(n),w.classes.push({value:n,regexp:new RegExp("(^|\\s)"+k(n)+"(\\s|$)")});else if(s)u=u?u.replace(g,""):null,w.pseudos||(w.pseudos=[]),w.pseudos.push({key:s.replace(g,""),value:u});else if(o){o=o.replace(g,""),r=(r||"").replace(g,"");var x,y;switch(p){case"^=":y=new RegExp("^"+k(r));break;case"$=":y=new RegExp(k(r)+"$");break;case"~=":y=new RegExp("(^|\\s)"+k(r)+"(\\s|$)");break;case"|=":y=new RegExp("^"+k(r)+"(-|$)");break;case"=":x=function(a){return r==a};break;case"*=":x=function(a){return a&&a.indexOf(r)>-1};break;case"!=":x=function(a){return r!=a};break;default:x=function(a){return!!a}}x||(x=function(a){return a&&y.test(a)}),w.attributes||(w.attributes=[]),w.attributes.push({key:o,operator:p,value:r,test:x})}return""}var a,b,c,d,e={},f={},g=/\\/g,h=function(c,g){if(!c)return null;if(c.Slick===!0)return c;c=(""+c).replace(/^\s+|\s+$/g,""),d=!!g;var i=d?f:e;if(i[c])return i[c];a={Slick:!0,expressions:[],raw:c,reverse:function(){return h(this.raw,!0)}},b=-1;while(c!=(c=c.replace(l,m)));return a.length=a.expressions.length,i[c]=d?j(a):a},i=function(a){return a==="!"?" ":a===" "?"!":/^!/.test(a)?a.replace(/^!/,""):"!"+a},j=function(a){var b=a.expressions;for(var c=0;c<b.length;c++){var d=b[c],e={parts:[],tag:"*",combinator:i(d[0].combinator)};for(var f=0;f<d.length;f++){var g=d[f];g.reverseCombinator||(g.reverseCombinator=" "),g.combinator=g.reverseCombinator,delete g.reverseCombinator}d.reverse().push(e)}return a},k=function(a){return a.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,"\\$&")},l=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|:+(<unicode>+)(?:\\((?:([\"']?)((?:\\([^\\)]+\\)|[^\\(\\)]*)+)\\12)\\))?)".replace(/<combinator>/,"["+k(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])")),n=this.Slick||{};return n.parse=function(a){return h(a)},n.escapeRegExp=k,n}),f("util/tools",[],function(){Array.prototype.indexOf=Array.prototype.indexOf||function(a,b){if(this==null)throw new TypeError;var c=Object(this),d=c.length>>>0;if(d===0)return-1;var e=0;arguments.length>0&&(e=Number(arguments[1]),e!=e?e=0:e!=0&&e!=Infinity&&e!=-Infinity&&(e=(e>0||-1)*Math.floor(Math.abs(e))));if(e>=d)return-1;var f=e>=0?e:Math.max(d-Math.abs(e),0);for(;f<d;f++)if(f in c&&c[f]===a)return f;return-1};var b={},d=Object.prototype.toString,e=Object.prototype.hasOwnProperty,f=Array.prototype.push,g=Array.prototype.slice,h=String.prototype.trim,i=Array.prototype.indexOf,j={extend:function(){var a,b,d,e,f,g,h=arguments[0]||{},i=1,k=arguments.length,l=!1;typeof h=="boolean"&&(l=h,h=arguments[1]||{},i=2),typeof h!="object"&&!j.isFunction(h)&&(h={}),k===i&&(h=this,--i);for(;i<k;i++)if((a=arguments[i])!=null)for(b in a){d=h[b],e=a[b];if(h===e)continue;l&&e&&(j.isPlainObject(e)||(f=j.isArray(e)))?(f?(f=!1,g=d&&j.isArray(d)?d:[]):g=d&&j.isPlainObject(d)?d:{},h[b]=j.extend(l,g,e)):e!==c&&(h[b]=e)}return h},isFunction:function(a){return j.type(a)==="function"},isArray:Array.isArray||function(a){return j.type(a)==="array"},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},isNumericQuick:function(a){return a==0||1%a>=0},type:function(a){return a==null?String(a):b[d.call(a)]||"object"},isPlainObject:function(a){if(!a||j.type(a)!=="object"||a.nodeType||a==a.window)return!1;try{if(a.constructor&&!e.call(a,"constructor")&&!e.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}var d;for(d in a);return d===c||e.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},noop:function(){},each:function(a,b,d){var e,f=0,g=a.length,h=g===c||j.isFunction(a);if(d){if(h){for(e in a)if(b.apply(a[e],d)===!1)break}else for(;f<g;)if(b.apply(a[f++],d)===!1)break}else if(h){for(e in a)if(b.call(a[e],e,a[e])===!1)break}else for(;f<g;)if(b.call(a[f],f,a[f++])===!1)break;return a},makeArray:function(a,b){var c=b||[];if(a!=null){var d=j.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||a===a.window?f.call(c,a):j.merge(c,a)}return c},merge:function(a,b){var d=a.length,e=0;if(typeof b.length=="number")for(var f=b.length;e<f;e++)a[d++]=b[e];else while(b[e]!==c)a[d++]=b[e++];return a.length=d,a},parseXML:function(b){if(typeof b!="string"||!b)return null;var d,e;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(b,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(b))}catch(f){d=c}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&j.error("Invalid XML: "+b),d},now:function(){return(new Date).getTime()},guid:1,proxy:function(a,b){if(typeof b=="string"){var d=a[b];b=a,a=d}if(!j.isFunction(a))return c;var e=g.call(arguments,2),f=function(){return a.apply(b,e.concat(g.call(arguments)))};return f.guid=a.guid=a.guid||f.guid||j.guid++,f},unique:function(a){var b,c,d;for(b=0,d=a.length;b<d;b++)for(c=b+1;c<d;c++)a[b]===a[c]&&(a.splice(c--,1),d--);return a}};return j.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,c){b["[object "+c+"]"]=c.toLowerCase()}),j}),f("util/callbacks",["./tools"],function(a){(function(a){function d(c){var d=b[c]={};return a.each(c.split(/\s+/),function(a,b){d[b]=!0}),d}var b={};a.Callbacks=function(e){e=typeof e=="string"?b[e]||d(e):a.extend({},e);var f=[],g=!e.once&&[],h,i,j,k,l,m,n=function(a){h=e.memory&&a,i=!0,m=k||0,k=0,l=f.length,j=!0;for(;f&&m<l;m++)if(f[m].apply(a[0],a[1])===!1&&e.stopOnFalse){h=!1;break}j=!1,f&&(g?g.length&&n(g.shift()):h?f=[]:o.disable())},o={add:function(){if(f){var b=f.length;(function c(b){a.each(b,function(b,d){a.isFunction(d)&&(!e.unique||!o.has(d))?f.push(d):d&&d.length&&c(d)})})(arguments),j?l=f.length:h&&(k=b,n(h))}return this},remove:function(){return f&&a.each(arguments,function(b,c){var d;while((d=a.inArray(c,f,d))>-1)f.splice(d,1),j&&(d<=l&&l--,d<=m&&m--)}),this},has:function(b){return a.inArray(b,f)>-1},empty:function(){return f=[],this},disable:function(){return f=g=h=c,this},disabled:function(){return!f},lock:function(){return g=c,h||o.disable(),this},locked:function(){return!g},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],f&&(!i||g)&&(j?g.push(b):n(b)),this},fire:function(){return o.fireWith(this,arguments),this},fired:function(){return!!i}};return o}})(a);var b=a.Callbacks;return a.Callbacks=c,b}),f("util/request-anim-frame",["require"],function(b){var c={},b=a,d=0,e=["ms","moz","webkit","o"];for(var f=0;f<e.length&&!a.requestAnimationFrame;++f)c.requestAnimationFrame=a[e[f]+"RequestAnimationFrame"],c.cancelAnimationFrame=a[e[f]+"CancelAnimationFrame"]||a[e[f]+"CancelRequestAnimationFrame"];return a.requestAnimationFrame||(c.requestAnimationFrame=function(b,c){var e=(new Date).getTime(),f=Math.max(0,16-(e-d)),g=a.setTimeout(function(){b(e+f)},f);return d=e+f,g}),a.cancelAnimationFrame||(c.cancelAnimationFrame=function(a){clearTimeout(a)}),c}),f("util/ticker",["./request-anim-frame"],function(a){function f(a,b){for(var c=0,d=a.length;c<d;++c)if(b(a[c],c)===!1)return!1;return!0}function g(b){if(!d)return;a.requestAnimationFrame(g),f(e,function(a){a(b,b-c)}),c=b}function h(){return c=(new Date).getTime(),d=!0,g(),b}function i(){return d=!1,b}function j(a){function c(b){if(b===a)return!1}return typeof a=="function"&&f(e,c)&&e.push(a),b}function k(a){return f(e,function(b,c){if(b===a)return e.splice(c,1),!1}),b}function l(){return!!d}var b,c=0,d=!1,e=[];return b={start:h,stop:i,subscribe:j,unsubscribe:k,isActive:l}}),f("math/vector2",[],function(){function a(b,c){if(!(this instanceof arguments.callee))return new a(b,c);this.set(b||0,c||0)}return a.vadd=function(b,c){return new a(b.x+c.x,b.y+c.y)},a.vsub=function(b,c){return new a(b.x-c.x,b.y-c.y)},a.mult=function(b,c){return new a(c.x*b,v.y*b)},a.proj=function(b,c){return a.mult(b.dot(c)/c.normSq(),c)},a.prototype.set=function(a,b){return this._norm=!1,this._normSq=!1,this.x=a,this.y=b,this},a.prototype.vadd=function(a){return this._norm=!1,this._normSq=!1,this.x+=a.x,this.y+=a.y,this},a.prototype.vsub=function(a){return this._norm=!1,this._normSq=!1,this.x-=a.x,this.y-=a.y,this},a.prototype.add=function(a,b){return this._norm=!1,this._normSq=!1,this.x+=a,this.y+=b===c?a:b,this},a.prototype.sub=function(a,b){return this._norm=!1,this._normSq=!1,this.x-=a,this.y-=b===c?a:b,this},a.prototype.mult=function(a){return this._normSq&&(this._normSq*=a,this._norm*=a),this.x*=a,this.y*=a,this},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y},a.prototype.cross=function(a){return this.x*a.y-this.y*a.x},a.prototype.proj=function(a){var b=this.dot(a)/a.normSq();return this.clone(a).mult(b)},a.prototype.norm=function(){return this._norm!==!1?this._norm:this._norm=Math.sqrt(this._normSq=this.x*this.x+this.y*this.y)},a.prototype.normSq=function(){return this._normSq!==!1?this._normSq:this._normSq=this.x*this.x+this.y*this.y},a.prototype.dist=function(a){var b,c;return Math.sqrt((b=a.x-this.x)*b+(c=a.y-this.y)*c)},a.prototype.distSq=function(a){var b,c;return(b=a.x-this.x)*b+(c=a.y-this.y)*c},a.prototype.normalize=function(){var a=this.norm();return a===0?this:(this.x/=a,this.y/=a,this._norm=1,this._normSq=1,this)},a.prototype.clone=function(b){return b?(this._norm=!1,this._normSq=!1,this.x=b.x,this.y=b.y,this):new a(this.x,this.y)},a.prototype.toNative=function(){return{x:this.x,y:this.y}},a.prototype.copyTo=function(a){return a.clone(this),this},a.prototype.zero=function(){return this._norm=0,this._normSq=0,this.x=0,this.y=0,this},a.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},a.prototype.clamp=function(a,b){return this.x=Math.min(Math.max(this.x,a.x),b.x),this.y=Math.min(Math.max(this.y,a.y),b.y),this._norm=this._normSq=!1,this},a.prototype.toString=function(){return"("+this.x+", "+this.y+")"},a}),f("math/vector",["./vector2"],function(a){return a}),f("physics/algorithms",["../util/tools","../math/vector"],function(a,b){return{interactions:{NewtonianGravity:function(a){var c,d,e,f,g=new b,h,i;return{beforeAccel:function(b,j,k,m){for(c=k+1,d=m.length;c<d;c++)f=j.position(),e=m[c],g.clone(e.position()),g.vsub(f),h=g.normSq(),i=a/h,j.accelerate(g.normalize().mult(i)),e.accelerate(g.negate())}}},Drag:function(a){var c=new b,d,e,f,g;return a=Math.max(Math.min(a,1),0),{beforeAccel:function(b,d,e,f){c.clone(d.velocity()),c.mult(1-a),d.velocity(c)}}},SphereCollide:function(a){function p(b,p,q,s){f.clone(p.position()),h=p.dimensions().radius;for(i=q+1,j=s.length;i<j;i++){m=s[i],e.clone(g.clone(m.position())),e.vsub(f),d=h+m.dimensions().radius;if(e.x<d&&e.y<d&&(c=e.norm())<d){n=.5*(c-d)/c,o&&(k.clone(p.velocity()),l.clone(m.velocity())),m.position(g.vsub(e.mult(n))),p.position(f.vadd(e));if(o){e.normalize(),n=l.dot(e)-k.dot(e);if(n>=0)continue;e.mult(n*(1-.5*a)),k.vadd(e),l.vsub(e),p.velocity(k),m.velocity(l)}}}}var c,d,e=new b,f=new b,g=new b,h,i,j,k=new b,l=new b,m,n,o=!1;return a=Math.max(Math.min(a,1),0),{afterAccel:p,afterInertia:function(a,b,c,d){o=!0,p(a,b,c,d),o=!1}}},ConstrainWithin:function(c,d){function o(a,b,c,j,k){e.clone(b.position()),i=b.dimensions(),i.radius?i.x=i.y=i.z=i.radius:(i.x/=2,i.y/=2,i.z/=2);if(n){f.clone(b.velocity());if(e.x>h.x-i.x||e.x<g.x+i.x)f.x=(d-1)*f.x;if(e.y>h.y-i.y||e.y<g.y+i.y)f.y=(d-1)*f.y;if(e.z>h.z-i.z||e.z<g.z+i.z)f.z=(d-1)*f.z}e.clamp({x:g.x+i.x,y:g.y+i.y,z:g.z+i.z},{x:h.x-i.x,y:h.y-i.y,z:h.z-i.z}),b.position(e),n&&b.velocity(f)}var e=new b,f=new b,g,h,i,j,k,l,m,n=!1;return typeof c.dimensions=="function"?(typeof c.position=="function"&&(g=c.position()),g=g||{x:0,y:0,z:0},i=h=c.dimensions()):typeof c=="object"?(g=c,i=c):g=i={},g.x=a.isNumericQuick(g.x)?g.x:-1/0,g.y=a.isNumericQuick(g.y)?g.y:-1/0,g.z=a.isNumericQuick(g.z)?g.z:-1/0,h.x=g.x+i.x,h.y=g.y+i.y,h.z=g.z+i.z,h.x=a.isNumericQuick(h.x)?h.x:1/0,h.y=a.isNumericQuick(h.y)?h.y:1/0,h.z=a.isNumericQuick(h.z)?h.z:1/0,{afterAccel:o,afterInertia:function(a,b,c,d,e){n=!0,o(a,b,c,d,e),n=!1}}}}}}),f("util/class",["./tools"],function(a){function b(b,c){var d=c?b[c]:b.__constructor__||a.noop;if(b.__extends__)var e=b.__extends__.prototype;else var e={};return d.prototype=a.extend({},e,b),d}return b}),f("physics/body",["../util/class","../util/tools","../util/callbacks"],function(a,b,c){var d="body"+(""+Math.random()).replace(/\D/g,""),e=0,f=a({_type:"body",_events:["modified","children.modified"],Body:function(a){var b=this._={};b.id=a||null,b.classes=[],b.oldclasses=this._classes,b.parent=null,b.children={},b.callbacks={},b.bubble={},b.data={};var d,e=this;for(var f=0,g=this._events.length;f<g;f++)d=this._events[f],!function(a){b.bubble[d]=function(){a.fire.apply(a,arguments)}}(b.callbacks[d]=c())},_fire:function(a,b){return this._.callbacks[a].fire(b),this},subscribe:function(a,b){var c=this._.callbacks[a];return c&&c.add(b),this},unsubscribe:function(a,b){var c=this._.callbacks[a];return c&&c.remove(b),this},requestUniqueId:function(){return d+e++},type:function(){return this._type},id:function(a){var b=this._,c=this.parent();return a&&typeof a=="string"?c?(c.remove(this),b.id=a,c.add(this),b.id):(b.id!==a&&this._fire("modified",[[this],this,"id"]),b.id=a):b.id||(c?b.id=c.requestUniqueId():null)},addClass:function(a){var b=this._,c=b.classes.length;return this.removeClass(a),b.classes.push.apply(b.classes,a.split(" ")),b.classes.length!==c&&this._fire("modified",[[this],this,"classes"]),this},removeClass:function(a){var b=this._,c=a.split(" "),d=b.classes,e,f=b.classes.length;for(var g=0,h=c.length;g<h;++g)(e=d.indexOf(c[g]))>=0&&d.splice(e,1);return b.classes.length!==f&&this._fire("modified",[[this],this,"classes"]),this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(c==="string"){var e=a.split(" "),f,g=b,h=0;while(f=e[h++])g=d?g:!this.hasClass(f),this[g?"addClass":"removeClass"](f)}else if(c==="undefined"||c==="boolean"){var i=this._,j,k=i.classes;if(j=i.classes.length)i.oldclasses=i.classes;i.classes=j&&a!==!0||a===!1?[]:i.oldclasses||[],k!==i.classes&&this._fire("modified",[[this],this,"classes"])}return this},classes:function(a){return a&&this.addClass(a),this._.classes.join(" ")},hasClass:function(a){var b=[].slice.call(arguments),c,d=!0;while(c=b.shift())d=d&&this._.classes.indexOf(c)>=0;return d},add:function(a){var b=this._;return a.parent(this)===this&&(b.children[a.id()]=a,a.subscribe("children.modified",b.bubble["children.modified"]),a.subscribe("modified",b.bubble["children.modified"]),this._fire("children.modified",[[a],this,"children"])),this},addTo:function(a){return a.add(this),this},remove:function(a){var b=this._;return a.parent()===this&&(a.parent(null),delete b.children[a.id()],a.unsubscribe("children.modified",b.bubble["children.modified"]),a.unsubscribe("modified",b.bubble["children.modified"]),this._fire("children.modified",[[a],this,"children"])),this},parent:function(a){var b=this._;return(a||a===null)&&b.parent!==a&&this!==a&&a.parents().indexOf(this)<0&&(b.parent&&b.parent.remove(this),b.parent=a,a&&b.parent.add(this)),b.parent},parents:function(){var a=this.parent(),b;return a?(b=a.parents(),b.unshift(a),b):[]},children:function(a,c){var d=this._,e=[],f,g;c=a===!0||!!c,a=typeof a=="boolean"?!1:a;if(!a){for(var h in d.children)e.push(g=d.children[h]),c&&e.push.apply(e,g.children(a,c));return e}if(b.isFunction(a)){for(var h in d.children)f=!!a(g=d.children[h],h,this),f&&e.push(g),c&&e.push.apply(e,g.children(a,c));return e}if(typeof a=="string"){f=/^(#|\.)?([\w]+)$/.exec(a);if(!f)return[];var d=this._,i=f[1]?f[1]==="#"?"id":"hasClass":"type",j=f[2];if(i==="id"){g=d.children[j];if(g)return[g];if(c)for(var h in d.children)if(g=d.children[h])return[g];return e}for(var h in d.children)g=d.children[h],f=g[i]()===j,f&&e.push(g),c&&e.push.apply(e,g.children(a,c))}return e},contains:function(a){if(this===a)return!1;var b=this._;for(var c=0,d=b.children.length;c<d;++c)if(a===b.children[c]||b.children[c].contains(a))return!0;return!1},data:function(a,b){return b?this._.data[a]=b:this._.data[a]}},"Body");return f.isBody=function(a){return a instanceof f},f}),f("physics/world",["../util/tools","../util/class","./body","../math/vector"],function(a,b,d,e){var f=b({_type:"world",_events:d.prototype._events.concat(["step"]),World:function(){f.prototype.__extends__.call(this);var a=this._;a.interactions={beforeAccel:[],afterAccel:[],afterInertia:[]},a.childCache=null,a.refreshChildren=!0,this.subscribe("children.modified",function(){a.refreshChildren=!0}),a.dimensions=new e,a.dimensions.set(1/0,1/0,1/0),a.dt=8},__extends__:d,parent:function(){return!1},dimensions:function(a,b,d){var e=this._.dimensions;return arguments.length>0&&e.set(a!==c?a:e.x,b!==c?b:e.y,d!==c?d:e.z),e.toNative()},registerInteraction:function(b,c,d,e){var f=this._,g={},h=e||this;return b in f.interactions&&(a.isFunction(c)?(h.subscribe("children.modified",function(a){g.bodies=c(e)}),g.bodies=c(e)):g.bodies=c,g.parent=e,g.callback=d,f.interactions[b].push(g)),this},doInteractions:function(a,b){var c=this._.interactions[a],d,e,f,g,h,i,j,k;if(!c)return this;for(h=0,i=c.length;h<i;++h){d=c[h],e=d.bodies,f=d.parent;for(j=0,k=e.length;j<k;++j)d.callback.call(g=e[j],b,g,j,e,f)}return this},resolveAcceleration:function(a){var b=this._.childCache,c=b.length-1;for(;c>-1;c--)b[c].resolveAcceleration(a)},resolveInertia:function(a){var b=this._.childCache,c=b.length-1;for(;c>-1;c--)b[c].resolveInertia(a)},onestep:function(){var a=this._,b=a.dt;return a.refreshChildren&&(a.childCache=this.children(function(b){return b.timeStep(a.dt),!0},!0),a.refreshChildren=!1),a.time+=b,this.doInteractions("beforeAccel",b),this.resolveAcceleration(b),this.doInteractions("afterAccel",b),this.resolveInertia(b),this.doInteractions("afterInertia",b),a.time},timeStep:function(a){if(a){this._.dt=a;if(!this._.childCache)return this;var b=this._.childCache,c=b.length-1;for(;c>-1;c--)b[c].timeStep(a);return this}return this._.dt},step:function(a){if(this.paused)return this;var b=this._,c=b.time||(b.time=a),d=a-c;if(!d)return this;this.FPS=1e3/d,this.nsteps=Math.ceil(d/b.dt),a-c>250&&(b.time=a-250);while(this.onestep()<a);return this._fire("step",[b.dt,b.time]),this},pause:function(){return this.paused=!0,this._.time=!1,this},unpause:function(){return this.paused=!1,this},isPaused:function(){return!!this.paused}},"World");return f.isWorld=function(a){return a instanceof f},f}),f("physics/phygets/basic",["../../util/class","../../util/tools","../../math/vector","../body"],function(a,b,d,e){var f=a({_type:"basic",_events:e.prototype._events.concat(["physics.modified"]),Basic:function(){f.prototype.__extends__.call(this);var a=this._;a.pos=new d,a.mid=new d,a.prev=new d,a.v=new d,a.a=new d,a.dt=1,a.dimensions=new d,a.midInt=!1},__extends__:e,resolveAcceleration:function(a){var b=this._;b.midInt=!0,b.mid.clone(b.pos),b.pos.vadd(b.a.mult(a*a)),b.a.zero()},resolveInertia:function(a){var b=this._;b.midInt=!1,b.pos.vadd(b.mid).vsub(b.prev),b.prev.clone(b.mid)},dimensions:function(a,b,d){var e=this._.dimensions;return arguments.length>0&&e.set(a!==c?a:e.x,b!==c?b:e.y,d!==c?d:e.z),e.toNative()},AABB:function(){return{x:0,y:0,z:0}},position:function(a){var b=this._,d,e=!1;return arguments.length>0&&(d=typeof a,d==="object"?b.pos.set(a.x!==c?a.x:b.pos.x,a.y!==c?a.y:b.pos.y,a.z!==c?a.z:b.pos.z):b.pos.set(a!==c?a:b.pos.x,arguments[1]!==c?arguments[1]:b.pos.y,arguments[2]!==c?arguments[2]:b.pos.z)),b.pos.toNative()},velocity:function(a){var b=this._,d=b.pos,e;return arguments.length>0?(e=typeof a,b.mid.clone(b.pos),e==="object"?b.prev.clone(b.mid).vsub(b.v.set(a.x!==c?a.x:0,a.y!==c?a.y:0,a.z!==c?a.z:0).mult(b.dt)):b.prev.clone(b.mid).vsub(b.v.set(a!==c?a:0,arguments[1]!==c?arguments[1]:0,arguments[2]!==c?arguments[2]:0).mult(b.dt)),b.v.mult(1/b.dt).toNative()):b.v.clone(d).vsub(b.prev).mult(1/b.dt).toNative()},accelerate:function(a){var b=this._,d;return arguments.length>0&&(d=typeof a,d==="object"?b.a.add(a.x!==c?a.x:0,a.y!==c?a.y:0,a.z!==c?a.z:0):b.a.add(a!==c?a:0,arguments[1]!==c?arguments[1]:0,arguments[2]!==c?arguments[2]:0)),this},timeStep:function(a){if(a){var b=this.velocity();return this._.dt=a,this.velocity(b),this}return this._.dt}},"Basic");return f}),f("physics/phygets/sphere",["../../util/class","./basic"],function(a,b){var d=a({_type:"sphere",Sphere:function(){d.prototype.__extends__.call(this),this._.radius=0},__extends__:b,dimensions:function(a){return a!==c&&(this._.radius=a||a.radius||0),{radius:this._.radius}},AABB:function(){var a=this._;return{x:a.radius,y:a.radius,z:a.radius}}},"Sphere");return d}),f("physics/phygets/point",["../../util/class","./basic"],function(a,b){var c=a({_type:"point",Point:function(){c.prototype.__extends__.call(this)},__extends__:b,dimensions:function(){return{x:0,y:0,z:0}}},"Point");return c}),f("physics/phyget",["./body","./phygets/sphere","./phygets/point"],function(a,b,c){function e(a){return new d[a]}function f(b){var c=b,d=!1;while(c&&!(d=c instanceof a))c=c.__extends__;return d}var d={sphere:b,point:c};return{create:e,isBody:f}}),f("pquery",["./util/slick.parser","./util/tools","./util/callbacks","./util/ticker","./math/vector","./physics/algorithms","./physics/world","./physics/phyget"],function(a,b,d,e,f,g,h,i){function t(a,b){var c=a.parents();return c[c.length-1]===b}var j=function(a,b){return new j.fn.init(a,b,q)},k=!1,l=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,m=/\S/,n=/^\s+/,o=/\s+$/,p=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,q,s;return j.fn=j.prototype={constructor:j,init:function(a,b,d){var e,f,g,h;if(!a)return this;if(i.isBody(a))return this.context=this[0]=a,this.length=1,this;if(a==="world"&&!b)return this.context=this.world,this[0]=this.world,this.selector=a,this.length=1,this;if(typeof a=="string"){a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?e=[null,a,null]:e=l.exec(a);if(!e||!e[1])return!b||b.pquery?(b||d).find(a):this.constructor(b).find(a);if(e[1])return b=b instanceof j?b[0]:b,h=b||this.world,g=p.exec(a),g?a=[j.createPhyget(g[1])]:j.error("Only simple <tag> creation is supported"),j.merge(this,a)}return a.selector!==c&&(this.selector=a.selector,this.context=a.context),j.makeArray(a,this)},selector:"",pquery:"0.1a",length:0,each:function(a,b){return j.each(this,a,b)},pushStack:function(a,b,c){var d=this.constructor();return j.isArray(a)?this.push.apply(d,a):j.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},push:Array.prototype.push},j.fn.init.prototype=j.fn,j.fn.extend=j.extend=b.extend,j.extend(b),j.extend(g),j.Callbacks=d,j.Vector=f,j.extend({ticker:e,sub:function(){function a(b,c){return new a.fn.init(b,c)}j.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.fn.world=new h,a.sub=this.sub,a.fn.init=function(d,e){return e&&e instanceof j&&!(e instanceof a)&&(e=a(e)),j.fn.init.call(this,d,e,b)},a.fn.init.prototype=a.fn;var b=a("world");return a},createPhyget:function(a){var b=i.create(a);return b||j.error("Invalid phyget type: "+a),b}}),!function(){function b(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a}j.find=function(c,d,e){function h(a,b,c){var e,f,h,i,j,k,l,m,n,o;a:for(n=0;o=g[n];n++){e={},f=a,h=b,k=o.length-1,l=k,m=o[l];do{h=f.id();if(l===o.length-2&&e[h])return!0;i=!m.id||m.id===h,i=i&&(!m.classList||f.hasClass.apply(f,m.classList)),i=i&&(!m.tag||m.tag==="*"||f.type()===m.tag);if(l===k){if(!i)continue a}else{if(j===">"&&!i)continue a;if(!i)continue}j=m.combinator,l--,m=o[l];if(!m){if(j===">"&&f.parent()!==d)continue a;return e[a.parent().id()]=!0,!0}}while((f=f.parent())&&f!==d)}return!1}e=e||[];if(!c||typeof c!="string")return e;d||(d=q.world),d.type()==="world"&&(c=c.replace(/^world ?/,""));var f=a.parse(c),g=f.expressions;return b(d.children(h,!0),e),e}}(),j.contains=function(a,b){return a.contains(b)},j.fn.extend({toArray:function(){return Array.prototype.slice.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]}}),j.fn.extend({world:new h,find:function(a){var b=this,c,d;if(typeof a!="string")return j(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(j.contains(b[c],this))return!0});var e=this.pushStack("","find",a),f,g,h;for(c=0,d=this.length;c<d;c++){f=e.length,j.find(a,this[c],e);if(c>0)for(g=f;g<e.length;g++)for(h=0;h<f;h++)if(e[h]===e[g]){e.splice(g--,1);break}}return e},contains:function(){},add:function(a,b){var c=typeof a=="string"?j(a,b):j.makeArray(a&&i.isBody(a)?[a]:a),d=j.merge(this.get(),c);return this.pushStack(!t(c[0],this.world)||!t(d[0],this.world)?d:j.unique(d))},append:function(){return this.manip(arguments,function(a){this.add(a)})},appendTo:function(){return this.manip(arguments,function(a){this.addTo(a)})},manip:function(a,b){var c=a[0],d=c.pquery?c[0]:c;if(this[0])for(var e=0,f=this.length;e<f;e++)b.call(this[e],d);return this}}),j.fn.extend({interact:function(a,b,d){var e,f=a;if(typeof a=="object"){for(f in a)this.interact(f,b,a[f]);return this}b==null&&d==null?(d=a,f="beforeAccel"):d==null&&(d=b,b=c,f=a);if(!d)return this;if(!b)e=j.makeArray(this),this.world.registerInteraction(f,e,d);else for(var g=0,h=this.length;g<h;++g)e=function(a){var c=j(a);return function(){return j.makeArray(c.find(b))}}(this[g]),this.world.registerInteraction(f,e,d,this[g]);return this},uninteract:function(){},accelerate:function(a){var b=this[0],c,d,e;if(typeof a=="object"&&(c=a.x)!==0||(d=a.y)!==0||(e=a.z)!==0||(c=a)!==0||(d=arguments[1])!==0||(e=arguments[2])!==0)for(var f=this.length-1;f>-1;f--)b=this[f],b.accelerate(c,d,e);return this}}),j.fn.extend({step:function(a){return this.world.step(a),this},timeStep:function(a){return a?(this.world.timeStep(a),this):this.world.timeStep()},pause:function(){return this.world.pause(),this},unpause:function(){return this.world.unpause(),this},isPaused:function(){return this.world.isPaused()}}),q=j("world"),j.fn.extend({id:function(a){return j.isFunction(a)?j.fn.id.call(this,a.call(this,0,this[0])):this[0]?this[0].id(a):null},addClass:function(a){if(j.isFunction(a))return this.each(function(b){jQuery(this).addClass(a.call(this,b,this.classes()))});if(a&&typeof a=="string")for(var b=0,c=this.length;b<c;++b)this[b].addClass(a);return this},removeClass:function(a){if(j.isFunction(a))return this.each(function(b){jQuery(this).removeClass(a.call(this,b,this.classes()))});if(a&&typeof a=="string")for(var b=0,c=this.length;b<c;++b)this[b].removeClass(a);return this},toggleClass:function(a,b){if(j.isFunction(a))return this.each(function(c){j(this).toggleClass(a.call(this,c,this.className,b),b)});for(var c=0,d=this.length;c<d;++c)this[c].toggleClass(a,b);return this},data:function(a,b){if(!b)return this[0]?this[0].data(a):null;for(var c=0,d=this.length;c<d;++c)this[c].data(a,b);return this}}),j.fn.extend({type:function(){var a=this[0];return a&&a.type()},classes:function(){var a=this[0];return a&&a.classes()},parents:function(){var a,b,c,d;for(b=0,c=this.length;b<c;b++)if(b==0)a=this[b].parents();else{a.push.apply(a,this[b].parents());for(d=length;d<a.length;d++)for(r=0;r<length;r++)if(a[r]===a[d]){a.splice(d--,1);break}}return a},position:function(a){var b=this[0];if(typeof a!="string"&&arguments.length>0){for(var c=this.length-1;c>-1;c--)b=this[c],b.position.apply(b,arguments);return this}return b&&b.position&&b.position()},velocity:function(a){var b=this[0];if(typeof pos!="string"&&arguments.length>0){for(var c=this.length-1;c>-1;c--)b=this[c],b.velocity.apply(b,arguments);return this}return b&&b.velocity&&b.velocity()},dimensions:function(a){var b=typeof a,c=this[0];if(b==="object"){for(var d=0,e=this.length;d<e;++d)this[d].dimensions(a.width,a.height,a.depth);return this}if(j.isNumeric(a)){a={width:a,height:arguments[1],depth:arguments[2]};for(var d=0,e=this.length;d<e;++d)this[d].dimensions(a.width,a.height,a.depth);return this}return c.dimensions()}}),j.fn.extend({hasClass:function(a){var b=this[0];return b&&b.hasClass.apply(b,arguments)}}),j.fn.extend({on:function(a,b){var c,d;for(var c=this.length-1;c>-1;c--)d=this[c],d.subscribe(a,j.proxy(b,d));return this}}),j}),e(["pquery"],function(b){a.pQuery=b})})(this,this.document)